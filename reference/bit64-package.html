<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>A S3 class for vectors of 64bit integers — bit64-package • bit64</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="A S3 class for vectors of 64bit integers — bit64-package"><meta name="description" content="Package 'bit64' provides fast serializable S3 atomic 64bit (signed) integers
that can be used in vectors, matrices, arrays and data.frames. Methods are
available for coercion from and to logicals, integers, doubles, characters
and factors as well as many elementwise and summary functions.
Version 0.8


With 'integer64' vectors you can store very large integers at the expense
of 64 bits, which is by factor 7 better than 'int64' from package 'int64'.
Due to the smaller memory footprint, the atomic vector architecture and
using only S3 instead of S4 classes, most operations are one to three orders
of magnitude faster: Example speedups are 4x for serialization, 250x for
adding, 900x for coercion and 2000x for object creation. Also 'integer64'
avoids an ongoing (potentially infinite) penalty for garbage collection
observed during existence of 'int64' objects (see code in example section).



Version 0.9


Package 'bit64' - which extends R with fast 64-bit integers - now has fast
(single-threaded) implementations the most important univariate algorithmic
operations (those based on hashing and sorting). We now have methods for
'match', '%in%', 'duplicated', 'unique', 'table', 'sort', 'order', 'rank',
'quantile', 'median' and 'summary'. Regarding data management we also have
novel generics 'unipos' (positions of the unique values), 'tiepos' (
positions of ties), 'keypos' (positions of foreign keys in a sorted
dimension table) and derived methods 'as.factor' and 'as.ordered'. This 64-
bit functionality is implemented carefully to be not slower than the
respective 32-bit operations in Base R and also to avoid outlying waiting
times observed with 'order', 'rank' and 'table' (speedup factors 20/16/200
respective). This increases the dataset size with wich we can work truly
interactive. The speed is achieved by simple heuristic optimizers in high-
level functions choosing the best from multiple low-level algorithms and
further taking advantage of a novel caching if activated. In an example R
session using a couple of these operations the 64-bit integers performed 22x
faster than base 32-bit integers, hash-caching improved this to 24x,
sortorder-caching was most efficient with 38x (caching hashing and sorting
is not worth it with 32x at duplicated RAM consumption).

"><meta property="og:description" content="Package 'bit64' provides fast serializable S3 atomic 64bit (signed) integers
that can be used in vectors, matrices, arrays and data.frames. Methods are
available for coercion from and to logicals, integers, doubles, characters
and factors as well as many elementwise and summary functions.
Version 0.8


With 'integer64' vectors you can store very large integers at the expense
of 64 bits, which is by factor 7 better than 'int64' from package 'int64'.
Due to the smaller memory footprint, the atomic vector architecture and
using only S3 instead of S4 classes, most operations are one to three orders
of magnitude faster: Example speedups are 4x for serialization, 250x for
adding, 900x for coercion and 2000x for object creation. Also 'integer64'
avoids an ongoing (potentially infinite) penalty for garbage collection
observed during existence of 'int64' objects (see code in example section).



Version 0.9


Package 'bit64' - which extends R with fast 64-bit integers - now has fast
(single-threaded) implementations the most important univariate algorithmic
operations (those based on hashing and sorting). We now have methods for
'match', '%in%', 'duplicated', 'unique', 'table', 'sort', 'order', 'rank',
'quantile', 'median' and 'summary'. Regarding data management we also have
novel generics 'unipos' (positions of the unique values), 'tiepos' (
positions of ties), 'keypos' (positions of foreign keys in a sorted
dimension table) and derived methods 'as.factor' and 'as.ordered'. This 64-
bit functionality is implemented carefully to be not slower than the
respective 32-bit operations in Base R and also to avoid outlying waiting
times observed with 'order', 'rank' and 'table' (speedup factors 20/16/200
respective). This increases the dataset size with wich we can work truly
interactive. The speed is achieved by simple heuristic optimizers in high-
level functions choosing the best from multiple low-level algorithms and
further taking advantage of a novel caching if activated. In an example R
session using a couple of these operations the 64-bit integers performed 22x
faster than base 32-bit integers, hash-caching improved this to 24x,
sortorder-caching was most efficient with 38x (caching hashing and sorting
is not worth it with 32x at duplicated RAM consumption).

"><script src="https://cdn.jsdelivr.net/gh/posit-dev/supported-by-posit/js/badge.min.js" data-max-height="43" data-light-bg="#666f76" data-light-fg="#f9f9f9"></script><script defer data-domain="bit64.r-lib.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">bit64</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">4.7.99</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-lib/bit64/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>A S3 class for vectors of 64bit integers</h1>
      <small class="dont-index">Source: <a href="https://github.com/r-lib/bit64/blob/main/R/bit64-package.R" class="external-link"><code>R/bit64-package.R</code></a>, <a href="https://github.com/r-lib/bit64/blob/main/R/integer64.R" class="external-link"><code>R/integer64.R</code></a></small>
      <div class="d-none name"><code>bit64-package.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Package 'bit64' provides fast serializable S3 atomic 64bit (signed) integers
that can be used in vectors, matrices, arrays and data.frames. Methods are
available for coercion from and to logicals, integers, doubles, characters
and factors as well as many elementwise and summary functions.</p><div class="section">
<h3 id="version-">Version 0.8<a class="anchor" aria-label="anchor" href="#version-"></a></h3>


<p>With 'integer64' vectors you can store very large integers at the expense
of 64 bits, which is by factor 7 better than 'int64' from package 'int64'.
Due to the smaller memory footprint, the atomic vector architecture and
using only S3 instead of S4 classes, most operations are one to three orders
of magnitude faster: Example speedups are 4x for serialization, 250x for
adding, 900x for coercion and 2000x for object creation. Also 'integer64'
avoids an ongoing (potentially infinite) penalty for garbage collection
observed during existence of 'int64' objects (see code in example section).</p>
</div>

<div class="section">
<h3 id="version--1">Version 0.9<a class="anchor" aria-label="anchor" href="#version--1"></a></h3>


<p>Package 'bit64' - which extends R with fast 64-bit integers - now has fast
(single-threaded) implementations the most important univariate algorithmic
operations (those based on hashing and sorting). We now have methods for
'match', '%in%', 'duplicated', 'unique', 'table', 'sort', 'order', 'rank',
'quantile', 'median' and 'summary'. Regarding data management we also have
novel generics 'unipos' (positions of the unique values), 'tiepos' (
positions of ties), 'keypos' (positions of foreign keys in a sorted
dimension table) and derived methods 'as.factor' and 'as.ordered'. This 64-
bit functionality is implemented carefully to be not slower than the
respective 32-bit operations in Base R and also to avoid outlying waiting
times observed with 'order', 'rank' and 'table' (speedup factors 20/16/200
respective). This increases the dataset size with wich we can work truly
interactive. The speed is achieved by simple heuristic optimizers in high-
level functions choosing the best from multiple low-level algorithms and
further taking advantage of a novel caching if activated. In an example R
session using a couple of these operations the 64-bit integers performed 22x
faster than base 32-bit integers, hash-caching improved this to 24x,
sortorder-caching was most efficient with 38x (caching hashing and sorting
is not worth it with 32x at duplicated RAM consumption).</p>
</div>

    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">integer64</span><span class="op">(</span>length <span class="op">=</span> <span class="fl">0L</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">is.integer64</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'integer64'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">value</span></span>
<span></span>
<span><span class="co"># S3 method for class 'integer64'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">x</span>, quote <span class="op">=</span> <span class="cn">FALSE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'integer64'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  vec.len <span class="op">=</span> <span class="va">strO</span><span class="op">$</span><span class="va">vec.len</span>,</span>
<span>  give.head <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  give.length <span class="op">=</span> <span class="va">give.head</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-length">length<a class="anchor" aria-label="anchor" href="#arg-length"></a></dt>
<dd><p>length of vector using <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer()</a></code></p></dd>


<dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>an integer64 vector</p></dd>


<dt id="arg-value">value<a class="anchor" aria-label="anchor" href="#arg-value"></a></dt>
<dd><p>an integer64 vector of values to be assigned</p></dd>


<dt id="arg-quote">quote<a class="anchor" aria-label="anchor" href="#arg-quote"></a></dt>
<dd><p>logical, indicating whether or not strings should be printed with surrounding quotes.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>further arguments to the <code><a href="https://rdrr.io/r/base/UseMethod.html" class="external-link">NextMethod()</a></code></p></dd>


<dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p>an integer64 vector</p></dd>


<dt id="arg-vec-len-give-head-give-length">vec.len, give.head, give.length<a class="anchor" aria-label="anchor" href="#arg-vec-len-give-head-give-length"></a></dt>
<dd><p>see <code><a href="https://rdrr.io/r/utils/str.html" class="external-link">utils::str()</a></code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>integer64</code> returns a vector of 'integer64', i.e.,
a vector of <code><a href="https://rdrr.io/r/base/double.html" class="external-link">double()</a></code> decorated with class 'integer64'.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p><code>integer64</code> are useful for handling database keys and exact counting in +-2^63.
Do not use them as replacement for 32bit integers, integer64 are not supported for
subscripting by R-core and they have different semantics when combined with double.
Do understand that <code>integer64</code> can only be useful over <code>double</code> if we do not coerce
it to <code>double</code>.</p>
<p>While</p>
<p>integer + double -&gt; double + double -&gt; double</p>
<p>or</p>
<p>1L + 0.5 -&gt; 1.5</p>
<p>for additive operations we coerce to <code>integer64</code></p>
<p>integer64 + double -&gt;  integer64 + integer64 -&gt; integer64</p>
<p>hence</p>
<p>as.integer64(1) + 0.5 -&gt; 1LL + 0LL -&gt; 1LL</p>
<p>see section "Arithmetic precision and coercion" above</p>
    </div>
    <div class="section level2">
    <h2 id="design-considerations">Design considerations<a class="anchor" aria-label="anchor" href="#design-considerations"></a></h2>
    <p>64 bit integers are related to big data: we need them to overcome address space
limitations. Therefore performance of the 64 bit integer type is critical. In the
S language – designed in 1975 – atomic objects were defined to be vectors for a
couple of good reasons: simplicity, option for implicit parallelization, good
cache locality. In recent years many analytical databases have learnt that lesson:
column based data bases provide superior performance for many applications, the
result are products such as MonetDB, Sybase IQ, Vertica, Exasol, Ingres Vectorwise.
If we introduce 64 bit integers not natively in Base R but as an external package,
we should at least strive to make them as 'basic' as possible. Therefore the design
choice of bit64 not only differs from package int64, it is obvious: Like the other
atomic types in Base R, we model data type 'integer64' as a contiguous <code><a href="https://rdrr.io/r/base/vector.html" class="external-link">atomic</a></code>
vector in memory, and we use the more basic S3 class system, not <a href="https://rdrr.io/r/base/isS4.html" class="external-link">S4</a>. Like
package int64 we want our 'integer64' to be <code><a href="https://rdrr.io/r/base/serialize.html" class="external-link">serialize</a></code>able, therefore we also
use an existing data type as the basis. Again the choice is obvious: R has only one
64 bit data type: doubles. By using <code><a href="https://rdrr.io/r/base/double.html" class="external-link">double</a></code>s, <code>integer64</code> <code><a href="https://rdrr.io/r/base/class.html" class="external-link">inherits</a></code> some
functionality such as <code><a href="https://rdrr.io/r/base/is.recursive.html" class="external-link">is.atomic()</a></code>, <code><a href="https://rdrr.io/r/base/length.html" class="external-link">length()</a></code>, <code>length&lt;-</code>, <code><a href="https://rdrr.io/r/base/names.html" class="external-link">names()</a></code>,
<code>names&lt;-</code>, <code><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim()</a></code>, <code>dim&lt;-</code>, <code><a href="https://rdrr.io/r/base/dimnames.html" class="external-link">dimnames()</a></code>, <code>dimnames&lt;-</code>.</p>
<p>Our R level functions strictly follow the functional programming paradigm:
no modification of arguments or other side-effects. Before version 0.93  we
internally deviated from the strict paradigm in order to boost performance. Our C
functions do not create new return values, instead we pass-in the memory to be
returned as an argument. This gives us the freedom to apply the C-function to new
or old vectors, which helps to avoid unnecessary memory allocation, unnecessary
copying and unnecessary garbage collection. Prior to 0.93 <em>within</em> our R functions
we also deviated from conventional R programming by not using <code>attr&lt;-</code> and
<code>attributes&lt;-</code> because they always did new memory allocation and copying in older
R versions. If we wanted to set attributes of return values that we have freshly
created, we instead used functions <code><a href="https://rdrr.io/pkg/bit/man/getsetattr.html" class="external-link">bit::setattr()</a></code> and <code><a href="https://rdrr.io/pkg/bit/man/getsetattr.html" class="external-link">bit::setattributes()</a></code>.
From version 0.93 <code><a href="https://rdrr.io/pkg/bit/man/getsetattr.html" class="external-link">bit::setattr()</a></code> is only used for manipulating <code><a href="cache.html">cache</a></code> objects,
in <code><a href="ramsort.integer64.html">ramsort.integer64()</a></code>, <code><a href="sort.integer64.html">sort.integer64()</a></code>, and <code><a href="as.data.frame.integer64.html">as.data.frame.integer64()</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="arithmetic-precision-and-coercion">Arithmetic precision and coercion<a class="anchor" aria-label="anchor" href="#arithmetic-precision-and-coercion"></a></h2>
    <p>The fact that we introduce 64 bit long long integers – without introducing 128-bit
long doubles – creates some subtle challenges: Unlike 32 bit <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>s, the
<code>integer64</code> are no longer a proper subset of <code><a href="https://rdrr.io/r/base/double.html" class="external-link">double</a></code>. If a binary arithmetic
operation does involve a <code>double</code> and a <code>integer</code>, it is a no-brainer to return
<code>double</code> without loss of information. If an <code>integer64</code> meets a <code>double</code>, it is not
trivial what type to return. Switching to <code>integer64</code> limits our ability to
represent very large numbers, switching to <code>double</code> limits our ability to
distinguish <code>x</code> from <code>x+1</code>. Since the latter is the purpose of introducing 64 bit
integers, we usually return <code>integer64</code> from functions involving <code>integer64</code>, for
example in <code><a href="c.integer64.html">c()</a></code>, <code><a href="c.integer64.html">cbind()</a></code>, and
<code><a href="c.integer64.html">rbind()</a></code></p>
<p>Different from Base R, our operators <code><a href="xor.integer64.html">+</a></code>, <code><a href="xor.integer64.html">-</a></code>,
<code><a href="xor.integer64.html">%/%</a></code>, and <code><a href="xor.integer64.html">%%</a></code> coerce their arguments to
<code>integer64</code> and always return <code>integer64</code>.</p>
<p>The multiplication operator <code><a href="xor.integer64.html">*</a></code> coerces its first argument to
<code>integer64</code> but allows its second argument to be also <code>double</code>: the second
argument is internaly coerced to 'long double' and the result of the
multiplication is returned as <code>integer64</code>.</p>
<p>The division <code><a href="xor.integer64.html">/</a></code> and power <code><a href="xor.integer64.html">^</a></code> operators also
coerce their first argument to <code>integer64</code> and coerce internally their second
argument to 'long double', they return as <code>double</code>, like
<code><a href="format.integer64.html">sqrt()</a></code>, <code><a href="format.integer64.html">log()</a></code>,
<code><a href="format.integer64.html">log2()</a></code>, and <code><a href="format.integer64.html">log10()</a></code> do.</p><table class="table table"><tr><td><strong>argument1</strong></td><td><strong>op</strong></td><td><strong>argument2</strong></td><td><strong>-&gt;</strong></td><td><strong>coerced1</strong></td><td><strong>op</strong></td><td><strong>coerced2</strong></td><td><strong>-&gt;</strong></td><td><strong>result</strong></td></tr><tr><td>integer64</td><td>+</td><td>double</td><td>-&gt;</td><td>integer64</td><td>+</td><td>integer64</td><td>-&gt;</td><td>integer64</td></tr><tr><td>double</td><td>+</td><td>integer64</td><td>-&gt;</td><td>integer64</td><td>+</td><td>integer64</td><td>-&gt;</td><td>integer64</td></tr><tr><td>integer64</td><td>-</td><td>double</td><td>-&gt;</td><td>integer64</td><td>-</td><td>integer64</td><td>-&gt;</td><td>integer64</td></tr><tr><td>double</td><td>-</td><td>integer64</td><td>-&gt;</td><td>integer64</td><td>-</td><td>integer64</td><td>-&gt;</td><td>integer64</td></tr><tr><td>integer64</td><td>%/%</td><td>double</td><td>-&gt;</td><td>integer64</td><td>%/%</td><td>integer64</td><td>-&gt;</td><td>integer64</td></tr><tr><td>double</td><td>%/%</td><td>integer64</td><td>-&gt;</td><td>integer64</td><td>%/%</td><td>integer64</td><td>-&gt;</td><td>integer64</td></tr><tr><td>integer64</td><td>%%</td><td>double</td><td>-&gt;</td><td>integer64</td><td>%%</td><td>integer64</td><td>-&gt;</td><td>integer64</td></tr><tr><td>double</td><td>%%</td><td>integer64</td><td>-&gt;</td><td>integer64</td><td>%%</td><td>integer64</td><td>-&gt;</td><td>integer64</td></tr><tr><td>integer64</td><td>*</td><td>double</td><td>-&gt;</td><td>integer64</td><td>*</td><td>long double</td><td>-&gt;</td><td>integer64</td></tr><tr><td>double</td><td>*</td><td>integer64</td><td>-&gt;</td><td>integer64</td><td>*</td><td>integer64</td><td>-&gt;</td><td>integer64</td></tr><tr><td>integer64</td><td>/</td><td>double</td><td>-&gt;</td><td>integer64</td><td>/</td><td>long double</td><td>-&gt;</td><td>double</td></tr><tr><td>double</td><td>/</td><td>integer64</td><td>-&gt;</td><td>integer64</td><td>/</td><td>long double</td><td>-&gt;</td><td>double</td></tr><tr><td>integer64</td><td>^</td><td>double</td><td>-&gt;</td><td>integer64</td><td>/</td><td>long double</td><td>-&gt;</td><td>double</td></tr><tr><td>double</td><td>^</td><td>integer64</td><td>-&gt;</td><td>integer64</td><td>/</td><td>long double</td><td>-&gt;</td><td>double</td></tr><tr><td>integer64</td><td>%*%</td><td>double</td><td>-&gt;</td><td>integer64</td><td>%*%</td><td>integer64</td><td>-&gt;</td><td>integer64</td></tr><tr><td>double</td><td>%*%</td><td>integer64</td><td>-&gt;</td><td>integer64</td><td>%*%</td><td>integer64</td><td>-&gt;</td><td>integer64</td></tr><tr><td>integer64</td><td>%*%</td><td>complex</td><td>-&gt;</td><td>double</td><td>%*%</td><td>complex</td><td>-&gt;</td><td>complex</td></tr><tr><td>complex</td><td>%*%</td><td>integer64</td><td>-&gt;</td><td>complex</td><td>%*%</td><td>double</td><td>-&gt;</td><td>complex</td></tr></table></div>
    <div class="section level2">
    <h2 id="creating-and-testing-s-class-integer-">Creating and testing S3 class 'integer64'<a class="anchor" aria-label="anchor" href="#creating-and-testing-s-class-integer-"></a></h2>
    <p>Our creator function <code>integer64</code> takes an argument <code>length</code>, creates an atomic
double vector of this length, attaches an S3 class attribute 'integer64' to it,
and that's it. We simply rely on S3 method dispatch and interpret those 64-bit
elements as 'long long int'.</p>
<p><code><a href="bit64S3.html">is.double()</a></code> currently returns TRUE for <code>integer64</code> and might return <code>FALSE</code> in
a later release. Consider <code><a href="bit64S3.html">is.double()</a></code> to have undefined behavior and do query
<code>is.integer64()</code> <em>before</em> querying <code><a href="bit64S3.html">is.double()</a></code>.</p>
<p>The methods <code>is.integer64()</code> and <code><a href="https://rdrr.io/r/base/vector.html" class="external-link">is.vector()</a></code> both return <code>TRUE</code> for <code>integer64</code>.
Note that we did not patch <code><a href="https://rdrr.io/r/base/mode.html" class="external-link">storage.mode()</a></code> and <code><a href="https://rdrr.io/r/base/typeof.html" class="external-link">typeof()</a></code>, which both continue
returning 'double'. Like for 32 bit <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>, <code><a href="https://rdrr.io/r/base/mode.html" class="external-link">mode()</a></code> returns 'numeric' and
<code><a href="https://rdrr.io/r/base/double.html" class="external-link">as.double()</a></code> tries coercing to <code><a href="https://rdrr.io/r/base/double.html" class="external-link">double</a></code>. It is possible that 'integer64' becomes
a <code>vmode</code> in package ff.</p>
<p>Further methods for creating <code>integer64</code> are <code><a href="sum.integer64.html">range()</a></code> which
returns the range of the data type if calles without arguments,
<code><a href="rep.integer64.html">rep()</a></code>, <code><a href="seq.integer64.html">seq()</a></code>.</p>
<p>For all available methods on <code>integer64</code> vectors see the index below and the examples.</p>
    </div>
    <div class="section level2">
    <h2 id="index-of-implemented-methods">Index of implemented methods<a class="anchor" aria-label="anchor" href="#index-of-implemented-methods"></a></h2>

<table class="table table"><tr><td><strong>creating, testing, printing</strong></td><td><strong>see also</strong></td><td><strong>description</strong></td></tr><tr><td><code>NA_integer64_</code></td><td><code><a href="https://rdrr.io/r/base/NA.html" class="external-link">NA_integer_</a></code></td><td>NA constant</td></tr><tr><td><code>integer64</code></td><td><code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code></td><td>create zero atomic vector</td></tr><tr><td><code><a href="runif64.html">runif64()</a></code></td><td><code><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif()</a></code></td><td>create random vector</td></tr><tr><td><code><a href="rep.integer64.html">rep.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep()</a></code></td><td></td></tr><tr><td><code><a href="seq.integer64.html">seq.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq()</a></code></td><td></td></tr><tr><td><code>is.integer64()</code></td><td><code>is()</code></td><td></td></tr><tr><td></td><td><code><a href="https://rdrr.io/r/base/integer.html" class="external-link">is.integer()</a></code></td><td>inherited from Base R</td></tr><tr><td><code>is.vector.integer64()</code></td><td><code><a href="https://rdrr.io/r/base/vector.html" class="external-link">is.vector()</a></code></td><td></td></tr><tr><td><code><a href="identical.integer64.html">identical.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical()</a></code></td><td></td></tr><tr><td><code>length&lt;-.integer64</code></td><td><code>length&lt;-</code></td><td></td></tr><tr><td></td><td><code><a href="https://rdrr.io/r/base/length.html" class="external-link">length()</a></code></td><td>inherited from Base R</td></tr><tr><td><code>names&lt;-</code></td><td>inherited from Base R</td><td></td></tr><tr><td></td><td><code><a href="https://rdrr.io/r/base/names.html" class="external-link">names()</a></code></td><td>inherited from Base R</td></tr><tr><td></td><td><code>dim&lt;-</code></td><td>inherited from Base R</td></tr><tr><td></td><td><code><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim()</a></code></td><td>inherited from Base R</td></tr><tr><td></td><td><code>dimnames&lt;-</code></td><td>inherited from Base R</td></tr><tr><td></td><td><code><a href="https://rdrr.io/r/base/dimnames.html" class="external-link">dimnames()</a></code></td><td>inherited from Base R</td></tr><tr><td></td><td><code><a href="https://rdrr.io/r/utils/str.html" class="external-link">str()</a></code></td><td>inherited from Base R, does not print values correctly</td></tr><tr><td><code>print.integer64()</code></td><td><code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code></td><td></td></tr><tr><td><code>str.integer64()</code></td><td><code><a href="https://rdrr.io/r/utils/str.html" class="external-link">str()</a></code></td><td></td></tr></table><table class="table table"><tr><td><strong>coercing to integer64</strong></td><td><strong>see also</strong></td><td><strong>description</strong></td></tr><tr><td><code><a href="as.integer64.character.html">as.integer64()</a></code></td><td></td><td>generic</td></tr><tr><td><code><a href="as.integer64.character.html">as.integer64.bitstring()</a></code></td><td><code><a href="as.character.integer64.html">as.bitstring()</a></code></td><td></td></tr><tr><td><code><a href="as.integer64.character.html">as.integer64.character()</a></code></td><td><code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code></td><td></td></tr><tr><td><code><a href="as.integer64.character.html">as.integer64.double()</a></code></td><td><code><a href="https://rdrr.io/r/base/double.html" class="external-link">double()</a></code></td><td></td></tr><tr><td><code><a href="as.integer64.character.html">as.integer64.integer()</a></code></td><td><code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer()</a></code></td><td></td></tr><tr><td><code><a href="as.integer64.character.html">as.integer64.integer64()</a></code></td><td><code>integer64</code></td><td></td></tr><tr><td><code><a href="as.integer64.character.html">as.integer64.logical()</a></code></td><td><code><a href="https://rdrr.io/r/base/logical.html" class="external-link">logical()</a></code></td><td></td></tr><tr><td><code><a href="as.integer64.character.html">as.integer64.NULL()</a></code></td><td><code><a href="https://rdrr.io/r/base/NULL.html" class="external-link">NULL()</a></code></td><td></td></tr></table><table class="table table"><tr><td><strong>coercing from integer64</strong></td><td><strong>see also</strong></td><td><strong>description</strong></td></tr><tr><td><code><a href="as.character.integer64.html">as.list.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list()</a></code></td><td>generic</td></tr><tr><td><code><a href="as.character.integer64.html">as.bitstring()</a></code></td><td><code><a href="as.character.integer64.html">as.bitstring()</a></code></td><td>generic</td></tr><tr><td><code><a href="as.character.integer64.html">as.bitstring.integer64()</a></code></td><td></td><td></td></tr><tr><td><code><a href="as.character.integer64.html">as.character.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character()</a></code></td><td></td></tr><tr><td><code><a href="as.character.integer64.html">as.double.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/base/double.html" class="external-link">as.double()</a></code></td><td></td></tr><tr><td><code><a href="as.character.integer64.html">as.integer.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer()</a></code></td><td></td></tr><tr><td><code><a href="as.character.integer64.html">as.logical.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/base/logical.html" class="external-link">as.logical()</a></code></td><td></td></tr></table><table class="table table"><tr><td><strong>data structures</strong></td><td><strong>see also</strong></td><td><strong>description</strong></td></tr><tr><td><code><a href="c.integer64.html">c.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/base/c.html" class="external-link">c()</a></code></td><td>vector concatenate</td></tr><tr><td><code><a href="c.integer64.html">cbind.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind()</a></code></td><td>column bind</td></tr><tr><td><code><a href="c.integer64.html">rbind.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind()</a></code></td><td>row bind</td></tr><tr><td><code><a href="as.data.frame.integer64.html">as.data.frame.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame()</a></code></td><td>coerce atomic object to data.frame</td></tr><tr><td></td><td><code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame()</a></code></td><td>inherited from Base R since we have coercion</td></tr></table><table class="table table"><tr><td><strong>subscripting</strong></td><td><strong>see also</strong></td><td><strong>description</strong></td></tr><tr><td><code><a href="extract.replace.integer64.html">[.integer64</a></code></td><td><code><a href="https://rdrr.io/r/base/Extract.html" class="external-link">[</a></code></td><td>vector and array extract</td></tr><tr><td><code><a href="extract.replace.integer64.html">[&lt;-.integer64</a></code></td><td><code><a href="https://rdrr.io/r/base/Extract.html" class="external-link">[&lt;-</a></code></td><td>vector and array assign</td></tr><tr><td><code><a href="extract.replace.integer64.html">[[.integer64</a></code></td><td><code><a href="https://rdrr.io/r/base/Extract.html" class="external-link">[[</a></code></td><td>scalar extract</td></tr><tr><td><code><a href="extract.replace.integer64.html">[[&lt;-.integer64</a></code></td><td><code><a href="https://rdrr.io/r/base/Extract.html" class="external-link">[[&lt;-</a></code></td><td>scalar assign</td></tr></table><table class="table table"><tr><td><strong>binary operators</strong></td><td><strong>see also</strong></td><td><strong>description</strong></td></tr><tr><td><code><a href="xor.integer64.html">+.integer64</a></code></td><td><code><a href="https://rdrr.io/r/base/Arithmetic.html" class="external-link">+</a></code></td><td>returns integer64</td></tr><tr><td><code><a href="xor.integer64.html">-.integer64</a></code></td><td><code><a href="https://rdrr.io/r/base/Arithmetic.html" class="external-link">-</a></code></td><td>returns integer64</td></tr><tr><td><code><a href="xor.integer64.html">*.integer64</a></code></td><td><code><a href="https://rdrr.io/r/base/Arithmetic.html" class="external-link">*</a></code></td><td>returns integer64</td></tr><tr><td><code><a href="xor.integer64.html">^.integer64</a></code></td><td><code><a href="https://rdrr.io/r/base/Arithmetic.html" class="external-link">^</a></code></td><td>returns double</td></tr><tr><td><code><a href="xor.integer64.html">/.integer64</a></code></td><td><code><a href="https://rdrr.io/r/base/Arithmetic.html" class="external-link">/</a></code></td><td>returns double</td></tr><tr><td><code><a href="xor.integer64.html">%/%</a></code></td><td><code><a href="https://rdrr.io/r/base/Arithmetic.html" class="external-link">%/%</a></code></td><td>returns integer64</td></tr><tr><td><code><a href="xor.integer64.html">%%</a></code></td><td><code><a href="https://rdrr.io/r/base/Arithmetic.html" class="external-link">%%</a></code></td><td>returns integer64</td></tr></table><table class="table table"><tr><td><strong>comparison operators</strong></td><td><strong>see also</strong></td><td><strong>description</strong></td></tr><tr><td><code><a href="xor.integer64.html">==.integer64</a></code></td><td><code><a href="https://rdrr.io/r/base/Comparison.html" class="external-link">==</a></code></td><td></td></tr><tr><td><code><a href="xor.integer64.html">!=.integer64</a></code></td><td><code><a href="https://rdrr.io/r/base/Comparison.html" class="external-link">!=</a></code></td><td></td></tr><tr><td><code>&lt;.integer64</code></td><td><code>&lt;</code></td><td></td></tr><tr><td><code>&lt;=.integer64</code></td><td><code>&lt;=</code></td><td></td></tr><tr><td><code>&gt;.integer64</code></td><td><code>&gt;</code></td><td></td></tr><tr><td><code>&gt;=.integer64</code></td><td><code>&gt;=</code></td><td></td></tr></table><table class="table table"><tr><td><strong>logical operators</strong></td><td><strong>see also</strong></td><td><strong>description</strong></td></tr><tr><td><code><a href="format.integer64.html">!.integer64</a></code></td><td><code><a href="https://rdrr.io/r/base/Logic.html" class="external-link">!</a></code></td><td></td></tr><tr><td><code>&amp;.integer64</code></td><td><code>&amp;</code></td><td></td></tr><tr><td><code><a href="xor.integer64.html">|.integer64</a></code></td><td><code><a href="https://rdrr.io/r/base/Logic.html" class="external-link">|</a></code></td><td></td></tr><tr><td><code><a href="xor.integer64.html">xor.integer64</a></code></td><td><code><a href="https://rdrr.io/r/base/Logic.html" class="external-link">xor()</a></code></td><td></td></tr></table><table class="table table"><tr><td><strong>math functions</strong></td><td><strong>see also</strong></td><td><strong>description</strong></td></tr><tr><td><code><a href="format.integer64.html">is.na.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na()</a></code></td><td>returns logical</td></tr><tr><td><code><a href="format.integer64.html">format.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/base/format.html" class="external-link">format()</a></code></td><td>returns character</td></tr><tr><td><code><a href="format.integer64.html">abs.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs()</a></code></td><td>returns integer64</td></tr><tr><td><code><a href="format.integer64.html">sign.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/base/sign.html" class="external-link">sign()</a></code></td><td>returns integer64</td></tr><tr><td><code><a href="format.integer64.html">log.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/base/Log.html" class="external-link">log()</a></code></td><td>returns double</td></tr><tr><td><code><a href="format.integer64.html">log10.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/base/Log.html" class="external-link">log10()</a></code></td><td>returns double</td></tr><tr><td><code><a href="format.integer64.html">log2.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/base/Log.html" class="external-link">log2()</a></code></td><td>returns double</td></tr><tr><td><code><a href="format.integer64.html">sqrt.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt()</a></code></td><td>returns double</td></tr><tr><td><code><a href="format.integer64.html">ceiling.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/base/Round.html" class="external-link">ceiling()</a></code></td><td>dummy returning its argument</td></tr><tr><td><code><a href="format.integer64.html">floor.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/base/Round.html" class="external-link">floor()</a></code></td><td>dummy returning its argument</td></tr><tr><td><code><a href="format.integer64.html">trunc.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/base/Round.html" class="external-link">trunc()</a></code></td><td>dummy returning its argument</td></tr><tr><td><code><a href="format.integer64.html">round.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/base/Round.html" class="external-link">round()</a></code></td><td>dummy returning its argument</td></tr><tr><td><code><a href="format.integer64.html">signif.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/base/Round.html" class="external-link">signif()</a></code></td><td>dummy returning its argument</td></tr></table><table class="table table"><tr><td><strong>cumulative functions</strong></td><td><strong>see also</strong></td><td><strong>description</strong></td></tr><tr><td><code><a href="cumsum.integer64.html">cummin.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cummin()</a></code></td><td></td></tr><tr><td><code><a href="cumsum.integer64.html">cummax.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cummax()</a></code></td><td></td></tr><tr><td><code><a href="cumsum.integer64.html">cumsum.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum()</a></code></td><td></td></tr><tr><td><code><a href="cumsum.integer64.html">cumprod.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumprod()</a></code></td><td></td></tr><tr><td><code><a href="cumsum.integer64.html">diff.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/base/diff.html" class="external-link">diff()</a></code></td><td></td></tr></table><table class="table table"><tr><td><strong>summary functions</strong></td><td><strong>see also</strong></td><td><strong>description</strong></td></tr><tr><td><code><a href="sum.integer64.html">range.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/base/range.html" class="external-link">range()</a></code></td><td></td></tr><tr><td><code><a href="sum.integer64.html">min.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min()</a></code></td><td></td></tr><tr><td><code><a href="sum.integer64.html">max.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max()</a></code></td><td></td></tr><tr><td><code><a href="sum.integer64.html">sum.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum()</a></code></td><td></td></tr><tr><td><code><a href="qtile.html">mean.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean()</a></code></td><td></td></tr><tr><td><code><a href="sum.integer64.html">prod.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/base/prod.html" class="external-link">prod()</a></code></td><td></td></tr><tr><td><code><a href="sum.integer64.html">all.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/base/all.html" class="external-link">all()</a></code></td><td></td></tr><tr><td><code><a href="sum.integer64.html">any.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/base/any.html" class="external-link">any()</a></code></td><td></td></tr></table><table class="table table"><tr><td><strong>algorithmically complex functions</strong></td><td><strong>see also</strong></td><td><strong>description (caching)</strong></td></tr><tr><td><code><a href="match.integer64.html">match.integer64()</a></code></td><td><code><a href="bit64S3.html">match()</a></code></td><td>position of x in table (h//o/so)</td></tr><tr><td><code><a href="match.integer64.html">%in%.integer64</a></code></td><td><code><a href="bit64S3.html">%in%</a></code></td><td>is x in table? (h//o/so)</td></tr><tr><td><code><a href="duplicated.integer64.html">duplicated.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/base/duplicated.html" class="external-link">duplicated()</a></code></td><td>is current element duplicate of previous one? (h//o/so)</td></tr><tr><td><code><a href="unique.integer64.html">unique.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique()</a></code></td><td>(shorter) vector of unique values only (h/s/o/so)</td></tr><tr><td><code><a href="unipos.html">unipos.integer64()</a></code></td><td><code><a href="unipos.html">unipos()</a></code></td><td>positions corresponding to unique values (h/s/o/so)</td></tr><tr><td><code><a href="tiepos.html">tiepos.integer64()</a></code></td><td><code><a href="tiepos.html">tiepos()</a></code></td><td>positions of values that are tied (//o/so)</td></tr><tr><td><code><a href="keypos.html">keypos.integer64()</a></code></td><td><code><a href="keypos.html">keypos()</a></code></td><td>position of current value in sorted list of unique values (//o/so)</td></tr><tr><td><code><a href="table.html">table.integer64()</a></code></td><td><code><a href="table.html">table()</a></code></td><td>unique values and their frequencies (h/s/o/so)</td></tr><tr><td><code><a href="sort.integer64.html">sort.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort()</a></code></td><td>sorted vector (/s/o/so)</td></tr><tr><td><code><a href="sort.integer64.html">order.integer64()</a></code></td><td><code><a href="bit64S3.html">order()</a></code></td><td>positions of elements that would create sorted vector (//o/so)</td></tr><tr><td><code><a href="rank.integer64.html">rank.integer64()</a></code></td><td><code><a href="bit64S3.html">rank()</a></code></td><td>(average) ranks of non-NAs, NAs kept in place (/s/o/so)</td></tr><tr><td><code><a href="qtile.html">quantile.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile()</a></code></td><td>(existing) values at specified percentiles (/s/o/so)</td></tr><tr><td><code><a href="qtile.html">median.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/stats/median.html" class="external-link">median()</a></code></td><td>(existing) value at percentile 0.5 (/s/o/so)</td></tr><tr><td><code><a href="qtile.html">summary.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code></td><td>(/s/o/so)</td></tr><tr><td><code><a href="all.equal.integer64.html">all.equal.integer64()</a></code></td><td><code><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal()</a></code></td><td>test if two objects are (nearly) equal (/s/o/so)</td></tr></table><table class="table table"><tr><td><strong>helper functions</strong></td><td><strong>see also</strong></td><td><strong>description</strong></td></tr><tr><td><code><a href="plusclass.html">minusclass()</a></code></td><td><code><a href="plusclass.html">minusclass()</a></code></td><td>removing class attritbute</td></tr><tr><td><code><a href="plusclass.html">plusclass()</a></code></td><td><code><a href="plusclass.html">plusclass()</a></code></td><td>inserting class attribute</td></tr><tr><td><code><a href="xor.integer64.html">binattr()</a></code></td><td><code><a href="xor.integer64.html">binattr()</a></code></td><td>define binary op behaviour</td></tr></table><table class="table table"><tr><td><strong>tested I/O functions</strong></td><td><strong>see also</strong></td><td><strong>description</strong></td></tr><tr><td></td><td><code><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.table()</a></code></td><td>inherited from Base R</td></tr><tr><td></td><td><code><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.table()</a></code></td><td>inherited from Base R</td></tr><tr><td></td><td><code><a href="https://rdrr.io/r/base/serialize.html" class="external-link">serialize()</a></code></td><td>inherited from Base R</td></tr><tr><td></td><td><code><a href="https://rdrr.io/r/base/serialize.html" class="external-link">unserialize()</a></code></td><td>inherited from Base R</td></tr><tr><td></td><td><code><a href="https://rdrr.io/r/base/save.html" class="external-link">save()</a></code></td><td>inherited from Base R</td></tr><tr><td></td><td><code><a href="https://rdrr.io/r/base/load.html" class="external-link">load()</a></code></td><td>inherited from Base R</td></tr><tr><td></td><td><code><a href="https://rdrr.io/r/base/dput.html" class="external-link">dput()</a></code></td><td>inherited from Base R</td></tr><tr><td></td><td><code><a href="https://rdrr.io/r/base/dput.html" class="external-link">dget()</a></code></td><td>inherited from Base R</td></tr></table></div>
    <div class="section level2">
    <h2 id="limitations-inherited-from-implementing-bit-integers-via-an-external-package">Limitations inherited from implementing 64 bit integers via an external package<a class="anchor" aria-label="anchor" href="#limitations-inherited-from-implementing-bit-integers-via-an-external-package"></a></h2>

<ul><li><p><strong>vector size</strong> of atomic vectors is still limited to
<code><a href="https://rdrr.io/r/base/zMachine.html" class="external-link">.Machine$integer.max</a></code>. However, external memory extending packages
such as ff or bigmemory can extend their address space now with <code>integer64</code>.
Having 64 bit integers also help with those not so obvious address issues that
arise once we exchange data with SQL databases and datawarehouses, which use big
integers as surrogate keys, e.g. on indexed primary key columns. This puts R into
a relatively strong position compared to certain commercial statistical softwares,
which sell database connectivity but neither have the range of 64 bit integers,
nor have integers at all, nor have a single numeric data type in their
macro-glue-language.</p></li>
<li><p><strong>literals</strong> such as <code>123LL</code> would require changes to Base R, up to then we need
to write (and call) <code>as.integer64(123L)</code> or <code>as.integer64(123)</code> or
<code>as.integer64('123')</code>. Only the latter allows to specify numbers beyond Base R's
numeric data types and therefore is the recommended way to use – using only one
way may facilitate migrating code to literals at a later stage.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="limitations-inherited-from-base-r-core-team-can-you-change-this-">Limitations inherited from Base R, Core team, can you change this?<a class="anchor" aria-label="anchor" href="#limitations-inherited-from-base-r-core-team-can-you-change-this-"></a></h2>

<ul><li><p><strong><code><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical()</a></code></strong> with default parameters does not distinguish all bit-patterns of
doubles. For testing purposes we provide a wrapper <code><a href="identical.integer64.html">identical.integer64()</a></code> that
will distinguish all bit-patterns. It would be desireable to have a single call
of <code><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical()</a></code> handle both, <code><a href="https://rdrr.io/r/base/double.html" class="external-link">double</a></code> and <code>integer64</code>.</p></li>
<li><p>the <strong>colon</strong> operator <a href="bit64S3.html">:</a> officially does not dispatch S3 methods, however, we
have made it generic:</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">from</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sum.integer64.html">lim.integer64</a></span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="va">to</span> <span class="op">&lt;-</span> <span class="va">from</span><span class="op">+</span><span class="fl">99</span></span>
<span><span class="va">from</span><span class="op">:</span><span class="va">to</span></span></code></pre><p></p></div>
<p>As a limitation remains: it will only dispatch at its first argument <code>from</code> but
not at its second <code>to</code>.</p></li>
<li><p><strong><code><a href="bit64S3.html">is.double()</a></code></strong> does not dispatch S3 methods, However, we have made it generic
and it will return <code>FALSE</code> on <code>integer64</code>.</p></li>
<li><p><strong><code><a href="https://rdrr.io/r/base/c.html" class="external-link">c()</a></code></strong> only dispatches <code><a href="c.integer64.html">c.integer64()</a></code> if the first argument is <code>integer64</code>
and it does not recursively dispatch the proper method when called with argument
<code>recursive=TRUE</code>. Therefore <code>c(list(integer64, integer64))</code> does not work and
for now you can only call <code>c.integer64(list(x, x))</code>.</p></li>
<li><p><strong>generic binary operators</strong> fail to dispatch <em>any</em> user-defined S3 method
if the two arguments have two different S3 classes. For example we have two
classes <code><a href="https://rdrr.io/pkg/bit/man/bit.html" class="external-link">bit::bit</a></code> and <code><a href="https://rdrr.io/pkg/bit/man/bitwhich.html" class="external-link">bit::bitwhich</a></code> sparsely representing boolean vectors
and we have methods <code><a href="https://rdrr.io/pkg/bit/man/xor.html" class="external-link">&amp;.bit</a></code> and
<code><a href="https://rdrr.io/pkg/bit/man/xor.html" class="external-link">&amp;.bitwhich</a></code>. For an expression involving both as in
<code>bit &amp; bitwhich</code>, none of the two methods is dispatched. Instead a standard
method is dispatched, which neither handles <code>bit</code> nor <code>bitwhich</code>. Although
it lacks symmetry, the better choice would be to dispatch simply the method
of the class of the first argument in case of class conflict. This choice would
allow authors of extension packages providing coherent behaviour at least within
their contributed classes. But as long as none of the package author's methods is
dispatched, they cannot handle the conflicting classes at all.</p></li>
<li><p><strong><code><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist()</a></code></strong> is not generic and if it were, we would face similar problems as
with <code><a href="https://rdrr.io/r/base/c.html" class="external-link">c()</a></code></p></li>
<li><p><strong><code><a href="https://rdrr.io/r/base/vector.html" class="external-link">vector()</a></code></strong> with argument <code>mode='integer64'</code> cannot work without adjustment
of Base R</p></li>
<li><p><strong><code><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector()</a></code></strong> with argument <code>mode='integer64'</code> cannot work without adjustment
of Base R</p></li>
<li><p><strong><code><a href="https://rdrr.io/r/base/vector.html" class="external-link">is.vector()</a></code></strong> does not dispatch its method <code>is.vector.integer64()</code></p></li>
<li><p><strong><code><a href="https://rdrr.io/r/base/mode.html" class="external-link">mode&lt;-()</a></code></strong> drops the class 'integer64' which is returned from
<code><a href="as.integer64.character.html">as.integer64()</a></code>. Also it does not remove an existing class 'integer64' when
assigning mode 'integer'.</p></li>
<li><p><strong><code><a href="https://rdrr.io/r/base/mode.html" class="external-link">storage.mode&lt;-()</a></code></strong> does not support external data types such as <code>integer64</code></p></li>
<li><p><strong><code><a href="matrix64.html">matrix()</a></code></strong> does drop the 'integer64' class attribute.</p></li>
<li><p><strong><code><a href="matrix64.html">array()</a></code></strong>  does drop the 'integer64' class attribute.</p><ul><li><p>In current R versions (1.15.1) this can be circumvented by activating the
function <code>as.vector.integer64()</code>. However, the CRAN maintainer has requested
to remove <code>as.vector.integer64()</code>, even at the price of breaking previously
working functionality of the package.</p></li>
</ul></li>
<li><p><strong><code><a href="https://rdrr.io/r/utils/str.html" class="external-link">str()</a></code></strong> does not print the values of <code>integer64</code> correctly</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="further-limitations">Further limitations<a class="anchor" aria-label="anchor" href="#further-limitations"></a></h2>

<ul><li><p><strong>subscripting</strong> non-existing elements and subscripting with <code>NA</code>s is currently
not supported. Such subscripting currently returns <code>9218868437227407266</code> instead
of <code>NA</code> (the <code>NA</code> value of the underlying double code). Following the full R
behaviour here would either destroy performance or require extensive C-coding.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer()</a></code> in base R</p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p><strong>Maintainer</strong>: Michael Chirico <a href="mailto:michaelchirico4@gmail.com">michaelchirico4@gmail.com</a></p>
<p>Authors:</p><ul><li><p>Jens Oehlschlägel</p></li>
</ul><p>Other contributors:</p><ul><li><p>Leonardo Silvestri [contributor]</p></li>
<li><p>Ofek Shilon [contributor]</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"Using integer64 in vector"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Using integer64 in vector</span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">integer64</span><span class="op">(</span><span class="fl">8</span><span class="op">)</span>    <span class="co"># create 64 bit vector</span></span></span>
<span class="r-in"><span><span class="va">x</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> integer64</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0 0 0 0 0 0 0 0</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/is.recursive.html" class="external-link">is.atomic</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>         <span class="co"># TRUE</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span><span class="fu">is.integer64</span><span class="op">(</span><span class="va">x</span><span class="op">)</span>      <span class="co"># TRUE</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">is.numeric</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>        <span class="co"># TRUE</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">is.integer</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>        <span class="co"># FALSE - debatable</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-in"><span><span class="fu"><a href="bit64S3.html">is.double</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>         <span class="co"># FALSE - might change</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-in"><span><span class="va">x</span><span class="op">[</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>           <span class="co"># assigned value is recycled as usual</span></span></span>
<span class="r-in"><span><span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span>               <span class="co"># subscripting as usual</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> integer64</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1 2 1 2 1 2</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">13</span>      <span class="co"># changing length as usual</span></span></span>
<span class="r-in"><span><span class="va">x</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> integer64</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 1 2 1 2 1 2 1 2 0 0 0 0 0</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">2</span><span class="op">)</span>            <span class="co"># replicate as usual</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> integer64</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 1 2 1 2 1 2 1 2 0 0 0 0 0 1 2 1 2 1 2 1 2 0 0 0 0 0</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fu"><a href="as.integer64.character.html">as.integer64</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>, <span class="fl">10</span><span class="op">)</span>     <span class="co"># seq.integer64 is dispatched on first given argument</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> integer64</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 1  2  3  4  5  6  7  8  9  10</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>to<span class="op">=</span><span class="fu"><a href="as.integer64.character.html">as.integer64</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span>, <span class="fl">1</span><span class="op">)</span>  <span class="co"># seq.integer64 is dispatched on first given argument</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> integer64</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 1  2  3  4  5  6  7  8  9  10</span>
<span class="r-in"><span><span class="fu"><a href="seq.integer64.html">seq.integer64</a></span><span class="op">(</span>along.with<span class="op">=</span><span class="va">x</span><span class="op">)</span>  <span class="co"># or call seq.integer64 directly</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> integer64</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 1  2  3  4  5  6  7  8  9  10 11 12 13</span>
<span class="r-in"><span><span class="co"># c.integer64 is dispatched only if *first* argument is integer64 ...</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">x</span>,<span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, max<span class="op">=</span><span class="fl">100</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># ... and coerces everything to integer64 - including double</span></span></span>
<span class="r-in"><span><span class="va">x</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> integer64</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 1  2  1  2  1  2  1  2  0  0  0  0  0  48 80 25 65 3  98 57 83 31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [23] 49 43 65 58</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">letters</span>  <span class="co"># use names as usual</span></span></span>
<span class="r-in"><span><span class="va">x</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> integer64</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  a  b  c  d  e  f  g  h  i  j  k  l  m  n  o  p  q  r  s  t  u  v  w </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1  2  1  2  1  2  1  2  0  0  0  0  0 48 80 25 65  3 98 57 83 31 49 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  x  y  z </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 43 65 58 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"Using integer64 in array - note that 'matrix' currently does not work"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Using integer64 in array - note that 'matrix' currently does not work</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"as.vector.integer64 removed as requested by the CRAN maintainer"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> as.vector.integer64 removed as requested by the CRAN maintainer</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"as consequence 'array' also does not work anymore"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> as consequence 'array' also does not work anymore</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"we still can create a matrix or array by assigning 'dim'"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> we still can create a matrix or array by assigning 'dim'</span>
<span class="r-in"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="as.integer64.character.html">as.integer64</a></span><span class="op">(</span><span class="cn">NA</span><span class="op">)</span>, <span class="fl">12</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>,<span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/dimnames.html" class="external-link">dimnames</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span>, <span class="va">LETTERS</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">y</span><span class="op">[</span><span class="st">"a"</span>,<span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>       <span class="co"># assigning as usual</span></span></span>
<span class="r-in"><span><span class="va">y</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> integer64</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   A    B    C    D   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> a 1    2    1    2   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> b &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> c &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;</span>
<span class="r-in"><span><span class="va">y</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>,<span class="op">-</span><span class="fl">4</span><span class="op">]</span>            <span class="co"># subscripting as usual</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> integer64</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      [,1] [,2] [,3]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 1    2    1   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;</span>
<span class="r-in"><span><span class="co"># cbind.integer64 dispatched on any argument and coerces everything to integer64</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span>E<span class="op">=</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, F<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">0</span>, <span class="fl">100</span><span class="op">)</span>, G<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"-1"</span>,<span class="st">"0"</span>,<span class="st">"1"</span><span class="op">)</span>, <span class="va">y</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> integer64</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   E F  G  A    B    C    D   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> a 1 28 -1 1    2    1    2   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> b 2 43 0  &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> c 3 88 1  &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"Using integer64 in data.frame"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Using integer64 in data.frame</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 'data.frame':	26 obs. of  1 variable:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ x:integer64  1 2 1 2 1 2 1 2 ... </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 'data.frame':	3 obs. of  4 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ A:integer64  1 NA NA </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ B:integer64  2 NA NA </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ C:integer64  1 NA NA </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ D:integer64  2 NA NA </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 'data.frame':	3 obs. of  4 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ A:integer64  1 NA NA </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ B:integer64  2 NA NA </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ C:integer64  1 NA NA </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ D:integer64  2 NA NA </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/AsIs.html" class="external-link">I</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 'data.frame':	3 obs. of  1 variable:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ y:integer64 [1:3, 1:4] 1 NA NA 2 NA NA 1 NA ... </span>
<span class="r-in"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">x</span>, y<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, <span class="fl">0</span>, <span class="fl">100</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">d</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    x         y</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> a  1 40.209214</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> b  2 72.937943</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> c  1 82.372018</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d  2 42.105380</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> e  1 58.657630</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> f  2 37.348130</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> g  1  4.057624</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> h  2  8.671996</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> i  0 60.015616</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> j  0 75.417392</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> k  0 83.511327</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> l  0 87.916330</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> m  0  9.763049</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> n 48  1.792242</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> o 80 96.647537</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> p 25 95.348450</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> q 65 30.463774</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> r  3  7.708301</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> s 98 45.650084</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> t 57 62.120304</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> u 83 32.384298</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> v 31 58.292825</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> w 49  1.506723</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> x 43 38.195984</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> y 65 50.755832</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> z 58 23.737675</span>
<span class="r-in"><span><span class="va">d</span><span class="op">$</span><span class="va">x</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> integer64</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 1  2  1  2  1  2  1  2  0  0  0  0  0  48 80 25 65 3  98 57 83 31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [23] 49 43 65 58</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"Using integer64 with csv files"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Using integer64 with csv files</span>
<span class="r-in"><span><span class="va">fi64</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">d</span>, file<span class="op">=</span><span class="va">fi64</span>, row.names<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">e</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="va">fi64</span>, colClasses<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"integer64"</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="va">fi64</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">e</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 'data.frame':	26 obs. of  2 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ x:integer64  1 2 1 2 1 2 1 2 ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ y: num  40.2 72.9 82.4 42.1 58.7 ...</span>
<span class="r-in"><span><span class="fu"><a href="identical.integer64.html">identical.integer64</a></span><span class="op">(</span><span class="va">d</span><span class="op">$</span><span class="va">x</span>,<span class="va">e</span><span class="op">$</span><span class="va">x</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"Serializing and unserializing integer64"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Serializing and unserializing integer64</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/dput.html" class="external-link">dput</a></span><span class="op">(</span><span class="va">d</span>, <span class="va">fi64</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">e</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/dput.html" class="external-link">dget</a></span><span class="op">(</span><span class="va">fi64</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="identical.integer64.html">identical.integer64</a></span><span class="op">(</span><span class="va">d</span><span class="op">$</span><span class="va">x</span>,<span class="va">e</span><span class="op">$</span><span class="va">x</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span><span class="va">e</span> <span class="op">&lt;-</span> <span class="va">d</span><span class="op">[</span>,<span class="op">]</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/save.html" class="external-link">save</a></span><span class="op">(</span><span class="va">e</span>, file<span class="op">=</span><span class="va">fi64</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span><span class="va">e</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/load.html" class="external-link">load</a></span><span class="op">(</span>file<span class="op">=</span><span class="va">fi64</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="identical.integer64.html">identical.integer64</a></span><span class="op">(</span><span class="va">d</span>,<span class="va">e</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"== Differences between integer64 and int64 =="</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-lib/bit64" class="external-link">bit64</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va">int64</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"-- integer64 is atomic --"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/is.recursive.html" class="external-link">is.atomic</a></span><span class="op">(</span><span class="fu">integer64</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">#is.atomic(int64())</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="fu">integer64</span><span class="op">(</span><span class="fl">3</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">#str(int64(3))</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"-- The following performance numbers are measured under RWin64  --"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"-- under RWin32 the advantage of integer64 over int64 is smaller --"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"-- integer64 needs 7x/5x less RAM than int64 under 64/32 bit OS</span></span></span>
<span class="r-in"><span><span class="st">(and twice the RAM of integer as it should be) --"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">#as.vector(object.size(int64(1e6))/object.size(integer64(1e6)))</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/object.size.html" class="external-link">object.size</a></span><span class="op">(</span><span class="fu">integer64</span><span class="op">(</span><span class="fl">1e6</span><span class="op">)</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/utils/object.size.html" class="external-link">object.size</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></span><span class="op">(</span><span class="fl">1e6</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"-- integer64 creates 2000x/1300x faster than int64 under 64/32 bit OS</span></span></span>
<span class="r-in"><span><span class="st">(and 3x the time of integer) --"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">t32</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></span><span class="op">(</span><span class="fl">1e8</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">t64</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="fu">integer64</span><span class="op">(</span><span class="fl">1e8</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">#T64 &lt;- system.time(int64(1e7))*10  # using 1e8 as above stalls our R on an i7 8 GB RAM Thinkpad</span></span></span>
<span class="r-in"><span><span class="co">#T64/t64</span></span></span>
<span class="r-in"><span><span class="va">t64</span><span class="op">/</span><span class="va">t32</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">i32</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1e6</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">d64</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/double.html" class="external-link">as.double</a></span><span class="op">(</span><span class="va">i32</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"-- the following timings are rather conservative since timings</span></span></span>
<span class="r-in"><span><span class="st"> of integer64 include garbage collection -- due to looped calls"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"-- integer64 coerces 900x/100x faster than int64</span></span></span>
<span class="r-in"><span><span class="st"> under 64/32 bit OS (and 2x the time of coercing to integer) --"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">t32</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">1000</span><span class="op">)</span><span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">d64</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">t64</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">1000</span><span class="op">)</span><span class="fu"><a href="as.integer64.character.html">as.integer64</a></span><span class="op">(</span><span class="va">d64</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">#T64 &lt;- system.time(as.int64(d64))*1000</span></span></span>
<span class="r-in"><span><span class="co">#T64/t64</span></span></span>
<span class="r-in"><span><span class="va">t64</span><span class="op">/</span><span class="va">t32</span></span></span>
<span class="r-in"><span><span class="va">td64</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">1000</span><span class="op">)</span><span class="fu"><a href="https://rdrr.io/r/base/double.html" class="external-link">as.double</a></span><span class="op">(</span><span class="va">i32</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">t64</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">1000</span><span class="op">)</span><span class="fu"><a href="as.integer64.character.html">as.integer64</a></span><span class="op">(</span><span class="va">i32</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">#T64 &lt;- system.time(for(i in 1:10)as.int64(i32))*100</span></span></span>
<span class="r-in"><span><span class="co">#T64/t64</span></span></span>
<span class="r-in"><span><span class="va">t64</span><span class="op">/</span><span class="va">td64</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"-- integer64 serializes 4x/0.8x faster than int64</span></span></span>
<span class="r-in"><span><span class="st"> under 64/32 bit OS (and less than 2x/6x the time of integer or double) --"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">t32</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span><span class="fu"><a href="https://rdrr.io/r/base/serialize.html" class="external-link">serialize</a></span><span class="op">(</span><span class="va">i32</span>, <span class="cn">NULL</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">td64</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span><span class="fu"><a href="https://rdrr.io/r/base/serialize.html" class="external-link">serialize</a></span><span class="op">(</span><span class="va">d64</span>, <span class="cn">NULL</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">i64</span> <span class="op">&lt;-</span> <span class="fu"><a href="as.integer64.character.html">as.integer64</a></span><span class="op">(</span><span class="va">i32</span><span class="op">)</span>;</span></span>
<span class="r-in"><span><span class="va">t64</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span><span class="fu"><a href="https://rdrr.io/r/base/serialize.html" class="external-link">serialize</a></span><span class="op">(</span><span class="va">i64</span>, <span class="cn">NULL</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span><span class="va">i64</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/base/gc.html" class="external-link">gc</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">#I64 &lt;- as.int64(i32);</span></span></span>
<span class="r-in"><span><span class="co">#T64 &lt;- system.time(for(i in 1:10)serialize(I64, NULL))</span></span></span>
<span class="r-in"><span><span class="co">#rm(I64); gc()</span></span></span>
<span class="r-in"><span><span class="co">#T64/t64</span></span></span>
<span class="r-in"><span><span class="va">t64</span><span class="op">/</span><span class="va">t32</span></span></span>
<span class="r-in"><span><span class="va">t64</span><span class="op">/</span><span class="va">td64</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"-- integer64 adds 250x/60x faster than int64</span></span></span>
<span class="r-in"><span><span class="st"> under 64/32 bit OS (and less than 6x the time of integer or double) --"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">td64</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span><span class="va">d64</span><span class="op">+</span><span class="va">d64</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">t32</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span><span class="va">i32</span><span class="op">+</span><span class="va">i32</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">i64</span> <span class="op">&lt;-</span> <span class="fu"><a href="as.integer64.character.html">as.integer64</a></span><span class="op">(</span><span class="va">i32</span><span class="op">)</span>;</span></span>
<span class="r-in"><span><span class="va">t64</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span><span class="va">i64</span><span class="op">+</span><span class="va">i64</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span><span class="va">i64</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/base/gc.html" class="external-link">gc</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">#I64 &lt;- as.int64(i32);</span></span></span>
<span class="r-in"><span><span class="co">#T64 &lt;- system.time(for(i in 1:10)I64+I64)*10</span></span></span>
<span class="r-in"><span><span class="co">#rm(I64); gc()</span></span></span>
<span class="r-in"><span><span class="co">#T64/t64</span></span></span>
<span class="r-in"><span><span class="va">t64</span><span class="op">/</span><span class="va">t32</span></span></span>
<span class="r-in"><span><span class="va">t64</span><span class="op">/</span><span class="va">td64</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"-- integer64 sums 3x/0.2x faster than int64</span></span></span>
<span class="r-in"><span><span class="st">(and at about 5x/60X the time of integer and double) --"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">td64</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">d64</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">t32</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">i32</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">i64</span> <span class="op">&lt;-</span> <span class="fu"><a href="as.integer64.character.html">as.integer64</a></span><span class="op">(</span><span class="va">i32</span><span class="op">)</span>;</span></span>
<span class="r-in"><span><span class="va">t64</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">i64</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span><span class="va">i64</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/base/gc.html" class="external-link">gc</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">#I64 &lt;- as.int64(i32);</span></span></span>
<span class="r-in"><span><span class="co">#T64 &lt;- system.time(for(i in 1:100)sum(I64))</span></span></span>
<span class="r-in"><span><span class="co">#rm(I64); gc()</span></span></span>
<span class="r-in"><span><span class="co">#T64/t64</span></span></span>
<span class="r-in"><span><span class="va">t64</span><span class="op">/</span><span class="va">t32</span></span></span>
<span class="r-in"><span><span class="va">t64</span><span class="op">/</span><span class="va">td64</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"-- integer64 diffs 5x/0.85x faster than integer and double</span></span></span>
<span class="r-in"><span><span class="st">(int64 version 1.0 does not support diff) --"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">td64</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span><span class="fu"><a href="https://rdrr.io/r/base/diff.html" class="external-link">diff</a></span><span class="op">(</span><span class="va">d64</span>, lag<span class="op">=</span><span class="fl">2L</span>, differences<span class="op">=</span><span class="fl">2L</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">t32</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span><span class="fu"><a href="https://rdrr.io/r/base/diff.html" class="external-link">diff</a></span><span class="op">(</span><span class="va">i32</span>, lag<span class="op">=</span><span class="fl">2L</span>, differences<span class="op">=</span><span class="fl">2L</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">i64</span> <span class="op">&lt;-</span> <span class="fu"><a href="as.integer64.character.html">as.integer64</a></span><span class="op">(</span><span class="va">i32</span><span class="op">)</span>;</span></span>
<span class="r-in"><span><span class="va">t64</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span><span class="fu"><a href="https://rdrr.io/r/base/diff.html" class="external-link">diff</a></span><span class="op">(</span><span class="va">i64</span>, lag<span class="op">=</span><span class="fl">2L</span>, differences<span class="op">=</span><span class="fl">2L</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span><span class="va">i64</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/base/gc.html" class="external-link">gc</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">t64</span><span class="op">/</span><span class="va">t32</span></span></span>
<span class="r-in"><span><span class="va">t64</span><span class="op">/</span><span class="va">td64</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"-- integer64 subscripts 1000x/340x faster than int64</span></span></span>
<span class="r-in"><span><span class="st">(and at the same speed / 10x slower as integer) --"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ts32</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">1000</span><span class="op">)</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1e6</span>, <span class="fl">1e3</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">t32</span><span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">1000</span><span class="op">)</span><span class="va">i32</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1e6</span>, <span class="fl">1e3</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">i64</span> <span class="op">&lt;-</span> <span class="fu"><a href="as.integer64.character.html">as.integer64</a></span><span class="op">(</span><span class="va">i32</span><span class="op">)</span>;</span></span>
<span class="r-in"><span><span class="va">t64</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">1000</span><span class="op">)</span><span class="va">i64</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1e6</span>, <span class="fl">1e3</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span><span class="va">i64</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/base/gc.html" class="external-link">gc</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">#I64 &lt;- as.int64(i32);</span></span></span>
<span class="r-in"><span><span class="co">#T64 &lt;- system.time(for(i in 1:100)I64[sample(1e6, 1e3)])*10</span></span></span>
<span class="r-in"><span><span class="co">#rm(I64); gc()</span></span></span>
<span class="r-in"><span><span class="co">#(T64-ts32)/(t64-ts32)</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">t64</span><span class="op">-</span><span class="va">ts32</span><span class="op">)</span><span class="op">/</span><span class="op">(</span><span class="va">t32</span><span class="op">-</span><span class="va">ts32</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"-- integer64 assigns 200x/90x faster than int64</span></span></span>
<span class="r-in"><span><span class="st">(and 50x/160x slower than integer) --"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ts32</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1e6</span>, <span class="fl">1e3</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">t32</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span><span class="va">i32</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1e6</span>, <span class="fl">1e3</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">1e3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">i64</span> <span class="op">&lt;-</span> <span class="fu"><a href="as.integer64.character.html">as.integer64</a></span><span class="op">(</span><span class="va">i32</span><span class="op">)</span>;</span></span>
<span class="r-in"><span><span class="va">i64</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span><span class="va">i64</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1e6</span>, <span class="fl">1e3</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">1e3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span><span class="va">i64</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/base/gc.html" class="external-link">gc</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">#I64 &lt;- as.int64(i32);</span></span></span>
<span class="r-in"><span><span class="co">#I64 &lt;- system.time(for(i in 1:10)I64[sample(1e6, 1e3)] &lt;- 1:1e3)*10</span></span></span>
<span class="r-in"><span><span class="co">#rm(I64); gc()</span></span></span>
<span class="r-in"><span><span class="co">#(T64-ts32)/(t64-ts32)</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">t64</span><span class="op">-</span><span class="va">ts32</span><span class="op">)</span><span class="op">/</span><span class="op">(</span><span class="va">t32</span><span class="op">-</span><span class="va">ts32</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">tdfi32</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="va">dfi32</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>a<span class="op">=</span><span class="va">i32</span>, b<span class="op">=</span><span class="va">i32</span>, c<span class="op">=</span><span class="va">i32</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tdfsi32</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="va">dfi32</span><span class="op">[</span><span class="fl">1e6</span><span class="op">:</span><span class="fl">1</span>,<span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fi32</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tdfwi32</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">dfi32</span>, file<span class="op">=</span><span class="va">fi32</span>, row.names<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tdfri32</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="va">fi32</span>, colClasses<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"integer"</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="va">fi32</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span><span class="va">dfi32</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/base/gc.html" class="external-link">gc</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">i64</span> <span class="op">&lt;-</span> <span class="fu"><a href="as.integer64.character.html">as.integer64</a></span><span class="op">(</span><span class="va">i32</span><span class="op">)</span>;</span></span>
<span class="r-in"><span><span class="va">tdfi64</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="va">dfi64</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>a<span class="op">=</span><span class="va">i64</span>, b<span class="op">=</span><span class="va">i64</span>, c<span class="op">=</span><span class="va">i64</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tdfsi64</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="va">dfi64</span><span class="op">[</span><span class="fl">1e6</span><span class="op">:</span><span class="fl">1</span>,<span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fi64</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tdfwi64</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">dfi64</span>, file<span class="op">=</span><span class="va">fi64</span>, row.names<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tdfri64</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="va">fi64</span>, colClasses<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"integer64"</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="va">fi64</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span><span class="va">i64</span>, <span class="va">dfi64</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/base/gc.html" class="external-link">gc</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#I64 &lt;- as.int64(i32);</span></span></span>
<span class="r-in"><span><span class="co">#tdfI64 &lt;- system.time(dfI64&lt;-data.frame(a=I64, b=I64, c=I64))</span></span></span>
<span class="r-in"><span><span class="co">#tdfsI64 &lt;- system.time(dfI64[1e6:1,])</span></span></span>
<span class="r-in"><span><span class="co">#fI64 &lt;- tempfile()</span></span></span>
<span class="r-in"><span><span class="co">#tdfwI64 &lt;- system.time(write.csv(dfI64, file=fI64, row.names=FALSE))</span></span></span>
<span class="r-in"><span><span class="co">#tdfrI64 &lt;- system.time(read.csv(fI64, colClasses=rep("int64", 3)))</span></span></span>
<span class="r-in"><span><span class="co">#unlink(fI64)</span></span></span>
<span class="r-in"><span><span class="co">#rm(I64, dfI64); gc()</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"-- integer64 coerces 40x/6x faster to data.frame than int64</span></span></span>
<span class="r-in"><span><span class="st">(and factor 1/9 slower than integer) --"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">#tdfI64/tdfi64</span></span></span>
<span class="r-in"><span><span class="va">tdfi64</span><span class="op">/</span><span class="va">tdfi32</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"-- integer64 subscripts from data.frame 20x/2.5x faster than int64</span></span></span>
<span class="r-in"><span><span class="st"> (and 3x/13x slower than integer) --"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">#tdfsI64/tdfsi64</span></span></span>
<span class="r-in"><span><span class="va">tdfsi64</span><span class="op">/</span><span class="va">tdfsi32</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"-- integer64 csv writes about 2x/0.5x faster than int64</span></span></span>
<span class="r-in"><span><span class="st">(and about 1.5x/5x slower than integer) --"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">#tdfwI64/tdfwi64</span></span></span>
<span class="r-in"><span><span class="va">tdfwi64</span><span class="op">/</span><span class="va">tdfwi32</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"-- integer64 csv reads about 3x/1.5 faster than int64</span></span></span>
<span class="r-in"><span><span class="st">(and about 2x slower than integer) --"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">#tdfrI64/tdfri64</span></span></span>
<span class="r-in"><span><span class="va">tdfri64</span><span class="op">/</span><span class="va">tdfri32</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span><span class="va">i32</span>, <span class="va">d64</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/base/gc.html" class="external-link">gc</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"-- investigating the impact on garbage collection: --"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"-- the fragmented structure of int64 messes up R's RAM --"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"-- and slows down R's gargbage collection just by existing --"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">td32</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/double.html" class="external-link">double</a></span><span class="op">(</span><span class="fl">21</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">td32</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="va">d64</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/double.html" class="external-link">double</a></span><span class="op">(</span><span class="fl">1e7</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">2</span><span class="op">:</span><span class="fl">11</span><span class="op">)</span><span class="va">td32</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/gc.html" class="external-link">gc</a></span><span class="op">(</span><span class="op">)</span>, gcFirst<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span><span class="va">d64</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">12</span><span class="op">:</span><span class="fl">21</span><span class="op">)</span><span class="va">td32</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/gc.html" class="external-link">gc</a></span><span class="op">(</span><span class="op">)</span>, gcFirst<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">t64</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/double.html" class="external-link">double</a></span><span class="op">(</span><span class="fl">21</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">t64</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="va">i64</span> <span class="op">&lt;-</span> <span class="fu">integer64</span><span class="op">(</span><span class="fl">1e7</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">2</span><span class="op">:</span><span class="fl">11</span><span class="op">)</span><span class="va">t64</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/gc.html" class="external-link">gc</a></span><span class="op">(</span><span class="op">)</span>, gcFirst<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span><span class="va">i64</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">12</span><span class="op">:</span><span class="fl">21</span><span class="op">)</span><span class="va">t64</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/gc.html" class="external-link">gc</a></span><span class="op">(</span><span class="op">)</span>, gcFirst<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#T64 &lt;- double(21)</span></span></span>
<span class="r-in"><span><span class="co">#T64[1] &lt;- system.time(I64 &lt;- int64(1e7))[3]</span></span></span>
<span class="r-in"><span><span class="co">#for (i in 2:11)T64[i] &lt;- system.time(gc(), gcFirst=FALSE)[3]</span></span></span>
<span class="r-in"><span><span class="co">#rm(I64)</span></span></span>
<span class="r-in"><span><span class="co">#for (i in 12:21)T64[i] &lt;- system.time(gc(), gcFirst=FALSE)[3]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#matplot(1:21, cbind(td32, t64, T64), pch=c("d","i","I"), log="y")</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/matplot.html" class="external-link">matplot</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">21</span>, <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">td32</span>, <span class="va">t64</span><span class="op">)</span>, pch<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"d"</span>,<span class="st">"i"</span><span class="op">)</span>, log<span class="op">=</span><span class="st">"y"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by Michael Chirico, Jens Oehlschlägel.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

  </div></footer></body></html>

