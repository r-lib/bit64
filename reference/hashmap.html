<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Hashing for 64bit integers — hashmap • bit64</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Hashing for 64bit integers — hashmap"><meta name="description" content="This is an explicit implementation of hash functionality that underlies
matching and other functions in R. Explicit means that you can create,
store and use hash functionality directly. One advantage is that you can
re-use hashmaps, which avoid re-building hashmaps again and again."><meta property="og:description" content="This is an explicit implementation of hash functionality that underlies
matching and other functions in R. Explicit means that you can create,
store and use hash functionality directly. One advantage is that you can
re-use hashmaps, which avoid re-building hashmaps again and again."><script defer data-domain="bit64.r-lib.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">bit64</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">4.7.99</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-lib/bit64/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Hashing for 64bit integers</h1>
      <small class="dont-index">Source: <a href="https://github.com/r-lib/bit64/blob/main/R/hash64.R" class="external-link"><code>R/hash64.R</code></a></small>
      <div class="d-none name"><code>hashmap.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This is an explicit implementation of hash functionality that underlies
matching and other functions in R. Explicit means that you can create,
store and use hash functionality directly. One advantage is that you can
re-use hashmaps, which avoid re-building hashmaps again and again.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">hashfun</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'integer64'</span></span>
<span><span class="fu">hashfun</span><span class="op">(</span><span class="va">x</span>, minfac <span class="op">=</span> <span class="fl">1.41</span>, hashbits <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">hashmap</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'integer64'</span></span>
<span><span class="fu">hashmap</span><span class="op">(</span><span class="va">x</span>, nunique <span class="op">=</span> <span class="cn">NULL</span>, minfac <span class="op">=</span> <span class="fl">1.41</span>, hashbits <span class="op">=</span> <span class="cn">NULL</span>, cache <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">hashpos</span><span class="op">(</span><span class="va">cache</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'cache_integer64'</span></span>
<span><span class="fu">hashpos</span><span class="op">(</span><span class="va">cache</span>, <span class="va">x</span>, nomatch <span class="op">=</span> <span class="cn">NA_integer_</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">hashrev</span><span class="op">(</span><span class="va">cache</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'cache_integer64'</span></span>
<span><span class="fu">hashrev</span><span class="op">(</span><span class="va">cache</span>, <span class="va">x</span>, nomatch <span class="op">=</span> <span class="cn">NA_integer_</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">hashfin</span><span class="op">(</span><span class="va">cache</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'cache_integer64'</span></span>
<span><span class="fu">hashfin</span><span class="op">(</span><span class="va">cache</span>, <span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">hashrin</span><span class="op">(</span><span class="va">cache</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'cache_integer64'</span></span>
<span><span class="fu">hashrin</span><span class="op">(</span><span class="va">cache</span>, <span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">hashdup</span><span class="op">(</span><span class="va">cache</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'cache_integer64'</span></span>
<span><span class="fu">hashdup</span><span class="op">(</span><span class="va">cache</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">hashuni</span><span class="op">(</span><span class="va">cache</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'cache_integer64'</span></span>
<span><span class="fu">hashuni</span><span class="op">(</span><span class="va">cache</span>, keep.order <span class="op">=</span> <span class="cn">FALSE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">hashupo</span><span class="op">(</span><span class="va">cache</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'cache_integer64'</span></span>
<span><span class="fu">hashupo</span><span class="op">(</span><span class="va">cache</span>, keep.order <span class="op">=</span> <span class="cn">FALSE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">hashtab</span><span class="op">(</span><span class="va">cache</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'cache_integer64'</span></span>
<span><span class="fu">hashtab</span><span class="op">(</span><span class="va">cache</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">hashmaptab</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'integer64'</span></span>
<span><span class="fu">hashmaptab</span><span class="op">(</span><span class="va">x</span>, nunique <span class="op">=</span> <span class="cn">NULL</span>, minfac <span class="op">=</span> <span class="fl">1.5</span>, hashbits <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">hashmapuni</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'integer64'</span></span>
<span><span class="fu">hashmapuni</span><span class="op">(</span><span class="va">x</span>, nunique <span class="op">=</span> <span class="cn">NULL</span>, minfac <span class="op">=</span> <span class="fl">1.5</span>, hashbits <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">hashmapupo</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'integer64'</span></span>
<span><span class="fu">hashmapupo</span><span class="op">(</span><span class="va">x</span>, nunique <span class="op">=</span> <span class="cn">NULL</span>, minfac <span class="op">=</span> <span class="fl">1.5</span>, hashbits <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>an integer64 vector</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>further arguments, passed from generics, ignored in methods</p></dd>


<dt id="arg-minfac">minfac<a class="anchor" aria-label="anchor" href="#arg-minfac"></a></dt>
<dd><p>minimum factor by which the hasmap has more elements compared to the data <code>x</code>,
ignored if <code>hashbits</code> is given directly</p></dd>


<dt id="arg-hashbits">hashbits<a class="anchor" aria-label="anchor" href="#arg-hashbits"></a></dt>
<dd><p>length of hashmap is <code>2^hashbits</code></p></dd>


<dt id="arg-nunique">nunique<a class="anchor" aria-label="anchor" href="#arg-nunique"></a></dt>
<dd><p>giving <em>correct</em> number of unique elements can help reducing the size of the hashmap</p></dd>


<dt id="arg-cache">cache<a class="anchor" aria-label="anchor" href="#arg-cache"></a></dt>
<dd><p>an optional <code><a href="cache.html">cache()</a></code> object into which to put the hashmap (by default a new cache is created</p></dd>


<dt id="arg-nomatch">nomatch<a class="anchor" aria-label="anchor" href="#arg-nomatch"></a></dt>
<dd><p>the value to be returned if an element is not found in the hashmap</p></dd>


<dt id="arg-keep-order">keep.order<a class="anchor" aria-label="anchor" href="#arg-keep-order"></a></dt>
<dd><p>determines order of results and speed: <code>FALSE</code> (the default) is faster and returns in the
(pseudo)random order of the hash function, <code>TRUE</code> returns in the order of first appearance in the original
data, but this requires extra work</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>See Details</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>

<table class="table table"><tr><td><strong>function</strong></td><td><strong>see also</strong></td><td><strong>description</strong></td></tr><tr><td><code>hashfun</code></td><td><code>digest</code></td><td>export of the hash function used in <code>hashmap</code></td></tr><tr><td><code>hashmap</code></td><td><code><a href="match.integer64.html">match()</a></code></td><td>return hashmap</td></tr><tr><td><code>hashpos</code></td><td><code><a href="match.integer64.html">match()</a></code></td><td>return positions of <code>x</code> in <code>hashmap</code></td></tr><tr><td><code>hashrev</code></td><td><code><a href="match.integer64.html">match()</a></code></td><td>return positions of <code>hashmap</code> in <code>x</code></td></tr><tr><td><code>hashfin</code></td><td><code><a href="match.integer64.html">%in%.integer64</a></code></td><td>return logical whether <code>x</code> is in <code>hashmap</code></td></tr><tr><td><code>hashrin</code></td><td><code><a href="match.integer64.html">%in%.integer64</a></code></td><td>return logical whether <code>hashmap</code> is in <code>x</code></td></tr><tr><td><code>hashdup</code></td><td><code><a href="duplicated.integer64.html">duplicated()</a></code></td><td>return logical whether hashdat is duplicated using hashmap</td></tr><tr><td><code>hashuni</code></td><td><code><a href="unique.integer64.html">unique()</a></code></td><td>return unique values of hashmap</td></tr><tr><td><code>hashmapuni</code></td><td><code><a href="unique.integer64.html">unique()</a></code></td><td>return unique values of <code>x</code></td></tr><tr><td><code>hashupo</code></td><td><code><a href="unique.integer64.html">unique()</a></code></td><td>return positions of unique values in hashdat</td></tr><tr><td><code>hashmapupo</code></td><td><code><a href="unique.integer64.html">unique()</a></code></td><td>return positions of unique values in <code>x</code></td></tr><tr><td><code>hashtab</code></td><td><code><a href="table.integer64.html">table()</a></code></td><td>tabulate values of hashdat using hashmap in <code>keep.order=FALSE</code></td></tr><tr><td><code>hashmaptab</code></td><td><code><a href="table.integer64.html">table()</a></code></td><td>tabulate values of <code>x</code> building hasmap on the fly in <code>keep.order=FALSE</code></td></tr></table></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="match.integer64.html">match()</a></code>, <code><a href="runif64.html">runif64()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="as.integer64.character.html">as.integer64</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fl">0</span><span class="op">:</span><span class="fl">9</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="as.integer64.character.html">as.integer64</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">9</span><span class="op">)</span>, <span class="fl">10</span>, <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">hashfun</span><span class="op">(</span><span class="va">y</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 11  8  8  3  1  3  9 15  7  8</span>
<span class="r-in"><span><span class="va">hx</span> <span class="op">&lt;-</span> <span class="fu">hashmap</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">hy</span> <span class="op">&lt;-</span> <span class="fu">hashmap</span><span class="op">(</span><span class="va">y</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/ls.html" class="external-link">ls</a></span><span class="op">(</span><span class="va">hy</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "hashbits" "hashmap"  "nhash"    "nunique"  "x"       </span>
<span class="r-in"><span><span class="fu">hashpos</span><span class="op">(</span><span class="va">hy</span>, <span class="va">x</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1]  1  7  8  9 NA  2 NA NA  4  5 NA</span>
<span class="r-in"><span><span class="fu">hashrev</span><span class="op">(</span><span class="va">hx</span>, <span class="va">y</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1]  1  7  8  9 NA  2 NA NA  4  5 NA</span>
<span class="r-in"><span><span class="fu">hashfin</span><span class="op">(</span><span class="va">hy</span>, <span class="va">x</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1]  TRUE  TRUE  TRUE  TRUE FALSE  TRUE FALSE FALSE  TRUE  TRUE FALSE</span>
<span class="r-in"><span><span class="fu">hashrin</span><span class="op">(</span><span class="va">hx</span>, <span class="va">y</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1]  TRUE  TRUE  TRUE  TRUE FALSE  TRUE FALSE FALSE  TRUE  TRUE FALSE</span>
<span class="r-in"><span><span class="fu">hashdup</span><span class="op">(</span><span class="va">hy</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] FALSE FALSE  TRUE FALSE FALSE  TRUE FALSE FALSE FALSE  TRUE</span>
<span class="r-in"><span><span class="fu">hashuni</span><span class="op">(</span><span class="va">hy</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> integer64</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 5    2    4    &lt;NA&gt; 1    6    8   </span>
<span class="r-in"><span><span class="fu">hashuni</span><span class="op">(</span><span class="va">hy</span>, keep.order<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> integer64</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 6    &lt;NA&gt; 2    5    1    8    4   </span>
<span class="r-in"><span><span class="fu">hashmapuni</span><span class="op">(</span><span class="va">y</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> integer64</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 6    &lt;NA&gt; 2    5    1    8    4   </span>
<span class="r-in"><span><span class="fu">hashupo</span><span class="op">(</span><span class="va">hy</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 5 4 9 2 7 1 8</span>
<span class="r-in"><span><span class="fu">hashupo</span><span class="op">(</span><span class="va">hy</span>, keep.order<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1 2 4 5 7 8 9</span>
<span class="r-in"><span><span class="fu">hashmapupo</span><span class="op">(</span><span class="va">y</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1 2 4 5 7 8 9</span>
<span class="r-in"><span><span class="fu">hashtab</span><span class="op">(</span><span class="va">hy</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $values</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> integer64</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 5    2    4    &lt;NA&gt; 1    6    8   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $counts</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1 2 1 3 1 1 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu">hashmaptab</span><span class="op">(</span><span class="va">y</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $values</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> integer64</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 5    2    4    &lt;NA&gt; 1    6    8   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $counts</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1 2 1 3 1 1 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="fu"><a href="bit64S3.html">match</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">)</span>,<span class="fu">hashpos</span><span class="op">(</span><span class="va">hy</span>, <span class="va">x</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="fu"><a href="bit64S3.html">match</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">)</span>,<span class="fu">hashrev</span><span class="op">(</span><span class="va">hx</span>, <span class="va">y</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op"><a href="bit64S3.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span>, <span class="fu">hashfin</span><span class="op">(</span><span class="va">hy</span>, <span class="va">x</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op"><a href="bit64S3.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span>, <span class="fu">hashrin</span><span class="op">(</span><span class="va">hx</span>, <span class="va">y</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/duplicated.html" class="external-link">duplicated</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">)</span>, <span class="fu">hashdup</span><span class="op">(</span><span class="va">hy</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="fu"><a href="as.integer64.character.html">as.integer64</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, <span class="fu">hashuni</span><span class="op">(</span><span class="va">hy</span>, keep.order<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="fu">hashuni</span><span class="op">(</span><span class="va">hy</span>, keep.order<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="fu">hashuni</span><span class="op">(</span><span class="va">hy</span>, keep.order<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="va">y</span><span class="op">[</span><span class="fu">hashupo</span><span class="op">(</span><span class="va">hy</span>, keep.order<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span><span class="op">]</span>, <span class="fu">hashuni</span><span class="op">(</span><span class="va">hy</span>, keep.order<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="va">y</span><span class="op">[</span><span class="fu">hashupo</span><span class="op">(</span><span class="va">hy</span>, keep.order<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">]</span>, <span class="fu">hashuni</span><span class="op">(</span><span class="va">hy</span>, keep.order<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="fu">hashpos</span><span class="op">(</span><span class="va">hy</span>, <span class="fu">hashuni</span><span class="op">(</span><span class="va">hy</span>, keep.order<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>, <span class="fu">hashupo</span><span class="op">(</span><span class="va">hy</span>, keep.order<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="fu">hashpos</span><span class="op">(</span><span class="va">hy</span>, <span class="fu">hashuni</span><span class="op">(</span><span class="va">hy</span>, keep.order<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span>, <span class="fu">hashupo</span><span class="op">(</span><span class="va">hy</span>, keep.order<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="fu">hashuni</span><span class="op">(</span><span class="va">hy</span>, keep.order<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span>, <span class="fu">hashtab</span><span class="op">(</span><span class="va">hy</span><span class="op">)</span><span class="op">$</span><span class="va">values</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span>, useNA<span class="op">=</span><span class="st">"ifany"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>, <span class="fu">hashtab</span><span class="op">(</span><span class="va">hy</span><span class="op">)</span><span class="op">$</span><span class="va">counts</span><span class="op">[</span><span class="fu"><a href="sort.integer64.html">order.integer64</a></span><span class="op">(</span><span class="fu">hashtab</span><span class="op">(</span><span class="va">hy</span><span class="op">)</span><span class="op">$</span><span class="va">values</span><span class="op">)</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="fu">hashuni</span><span class="op">(</span><span class="va">hy</span>, keep.order<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>, <span class="fu">hashmapuni</span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="fu">hashupo</span><span class="op">(</span><span class="va">hy</span>, keep.order<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>, <span class="fu">hashmapupo</span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="fu">hashtab</span><span class="op">(</span><span class="va">hy</span><span class="op">)</span>, <span class="fu">hashmaptab</span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>    <span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"explore speed given size of the hasmap in 2^hashbits and size of the data"</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"more hashbits means more random access and less collisions"</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"i.e. more data means less random access and more collisions"</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="va">bits</span> <span class="op">&lt;-</span> <span class="fl">24</span></span></span>
<span class="r-in"><span>    <span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">0.1</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="va">tim</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">b</span><span class="op">)</span>, <span class="fl">2</span>, dimnames<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">b</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bits"</span>,<span class="st">"bits+1"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">b</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>      <span class="va">n</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="fl">2</span><span class="op">^</span><span class="op">(</span><span class="va">bits</span><span class="op">+</span><span class="va">b</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>      <span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="as.integer64.character.html">as.integer64</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>      <span class="va">tim</span><span class="op">[</span><span class="va">i</span>,<span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/bit/man/repeat.time.html" class="external-link">repeat.time</a></span><span class="op">(</span><span class="fu">hashmap</span><span class="op">(</span><span class="va">x</span>, hashbits<span class="op">=</span><span class="va">bits</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span></span></span>
<span class="r-in"><span>      <span class="va">tim</span><span class="op">[</span><span class="va">i</span>,<span class="fl">2</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/bit/man/repeat.time.html" class="external-link">repeat.time</a></span><span class="op">(</span><span class="fu">hashmap</span><span class="op">(</span><span class="va">x</span>, hashbits<span class="op">=</span><span class="va">bits</span><span class="op">+</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span></span></span>
<span class="r-in"><span>      <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">tim</span><span class="op">)</span></span></span>
<span class="r-in"><span>      <span class="fu"><a href="https://rdrr.io/r/graphics/matplot.html" class="external-link">matplot</a></span><span class="op">(</span><span class="va">b</span>, <span class="va">tim</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">}</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"we conclude that n*sqrt(2) is enough to avoid collisions"</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by Michael Chirico, Jens Oehlschlägel.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

  </div></footer></body></html>

